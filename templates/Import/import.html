<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='Import/import.css') }}">
    {% include 'taskbar.html' %}
</head>

<body>
    {% include 'flash_messages.html' %}
    <div class="with-fixed-taskbar">
        <div class="container">
            <h2>Import</h2>
            
            <!-- <h4>Manual</h4>
            <form id="manualImportForm" enctype="multipart/form-data" class="mt-3">
                <div class="mb-3">
                    <label for="file" class="form-label">Upload Excel File</label>
                    <input type="file" class="form-control" id="file" name="file" accept=".xlsx, .xls">
                </div>
                <button type="submit" class="btn btn-primary">Import</button>
            </form>

            <hr> -->

            <h4>Auto</h4>
            <form id="autoImportForm">
                <div class="form-group">
                    <label for="service">Select Service</label>
                    <select id="service" name="service" required>
                        <option value="" disabled selected>Select a service</option>
                        {% for service in services %}
                            <option value="{{ service }}">{{ service }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div id="technofreshFields" class="service-fields d-none">
                    <div class="form-group">
                        <label for="start_date">Start Date</label>
                        <input type="date" id="start_date" name="start_date">
                    </div>
                    <div class="form-group">
                        <label for="end_date">End Date</label>
                        <input type="date" id="end_date" name="end_date">
                    </div>
                </div>

                <div id="freshlinqFields" class="service-fields d-none">
                    <div class="form-group">
                        <label for="sales_date">Sales from</label>
                        <input type="date" id="sales_date" name="sales_date">
                    </div>
                </div>

                <div id="unknownService" class="d-none">
                    <p class="error-message">Unknown service selected.</p>
                </div>

                <button type="submit" id="autoImportBtn" class="btn-primary d-none">Auto Import</button>
            </form>



        <div class="results-container">
            <h2>Import Results</h2>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search Delivery Note No..." />
            </div>
            
            <table id="resultsTable">
                <thead>
                    <div class="filter-buttons">
                        <button id="matchedBtn">Matched</button>
                        <button id="linkedBtn">Linked</button>
                        <button id="noMatchBtn">No Match</button>
                    </div>                               
                    <tr>
                        <th></th>
                        <th>Agent</th>
                        <th>SupplierRef</th>
                        <th>Product</th>
                        <th>Class</th>
                        <th>Size</th>
                        <th>Variety</th>
                        <th>Brand</th>
                        <th>Quantity</th>
                        <th>Average Price</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="resultsTableBody">
                    <!-- Data loads here -->
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{{ url_for('static', filename='Import/import.js') }}"></script>
    <script src="{{ url_for('static', filename='Import/display-results.js') }}"></script>

</body>
</html>
