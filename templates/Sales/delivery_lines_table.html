{% for line in lines %}
<tr class="delivery-line" data-line-id="{{ line.dellineindex }}" onclick="selectDeliveryLine(this, '{{ line.dellineindex }}')" style="cursor: pointer;">
    <td>{{ line.dellineindex }}</td>
    <td>
        <div style="display: flex; align-items: center; gap: 8px;">
            <span>{{ line.productdescription }}</span>
            <button class="icon-btn" onclick="changeProduct('{{ line.dellineindex }}', '{{ line.productdescription }}'); event.stopPropagation();">
                <img src="/static/Image/change.png" alt="Change Product">
            </button>
        </div>
    </td>
    <td>{{ line.mainprodunitname }}</td>
    <td>
        <div style="display: flex; align-items: center; gap: 8px;">
            <span class="quantity-display">{{ line.dellinequantitybags or 0 }}</span>
            <input type="number" 
                   class="form-control quantity-input" 
                   value="{{ line.dellinequantitybags or 0 }}"
                   min="{{ line.totalqtysold + line.totalqtyinvoiced }}"
                   style="display: none; width: 100px;"
                   data-line-id="{{ line.dellineindex }}"
                   data-sold="{{ line.totalqtysold or 0 }}"
                   data-invoiced="{{ line.totalqtyinvoiced or 0 }}">
        </div>
    </td>
    <td>{{ line.totalqtysold or 0 }}</td>
    <td>{{ line.totalqtyinvoiced or 0 }}</td>
</tr>
{% endfor %} 